@page "/ReportViewer/DynamicColumns"
@page "/ReportViewer/DynamicColumns/Preview"
@using Microsoft.JSInterop
@using Microsoft.AspNetCore.Components
@inject IJSRuntime JSRuntime
@using blazor_samples.Data;
@using blazor_samples.Data.Model;

<div id="report-viewer"></div>

<div id="source-description">
     <p>
            Dynamic column tabula report demonstrates to change the number of columns at runtime using JavaScript Bold Report Viewer.
        </p>
        <ul>
            <li>
               Dynamic column is a feature that allows one to store different sets of columns for each row in a table.
            </li>
            <li>
                In this table few columns are static and few can be varied, based on the column names selected in the parameter. This feature is achieved by changing the column visibility based on the parameter selected.
            </li>
        </ul>
        <p>
            More information about the Tablix data region can be found in this <a href="https://help.boldreports.com/embedded-reporting/blazor-reporting/report-designer/designer-guide/report-items/tablix/"
                                                                                  target="_blank">documentation</a> section.
        </p>
</div>

@code {
    // ReportViewer options
    BoldReportViewerOptions viewerOptions = new BoldReportViewerOptions();

    // Used to render the Bold Report Viewer component in Blazor page.
    public async void RenderReportViewer()
    {
        viewerOptions.ReportName = "dynamic-columns.rdl";
        viewerOptions.ServiceURL = Globals.SERVICE_URL;
        await JSRuntime.InvokeVoidAsync("BoldReports.RenderViewer", "report-viewer", viewerOptions);
    }
    // Initial rendering of Bold Report Viewer
    protected override void OnAfterRender(bool firstRender)
    {
        RenderReportViewer();
    }
}